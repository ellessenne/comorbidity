<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Computing Comorbidity Scores • comorbidity</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Computing Comorbidity Scores">
<meta property="og:description" content="Computing comorbidity indices and scores such as the weighted Charlson
  score (Charlson, 1987 &lt;doi:10.1016/0021-9681(87)90171-8&gt;) and the Elixhauser
  comorbidity score (Elixhauser, 1998 &lt;doi:10.1097/00005650-199801000-00004&gt;)
  using ICD-9-CM or ICD-10 codes (Quan, 2005 &lt;doi:10.1097/01.mlr.0000182534.19832.83&gt;).
  Australian and Swedish modifications of the Charlson Comorbidity Index are available
  as well (Sundararajan, 2004 &lt;doi:10.1016/j.jclinepi.2004.03.012&gt; and Ludvigsson, 2021 
  &lt;doi:10.2147/CLEP.S282475&gt;).">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">comorbidity</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0-9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/A-introduction.html">Introduction</a>
    </li>
    <li>
      <a href="articles/B-comorbidity-scores.html">Supported Comorbidity Mappings and Scores</a>
    </li>
    <li>
      <a href="articles/C-changes.html">Updating to {comorbidity} 1.0.0</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ellessenne/comorbidity/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="comorbidity-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#comorbidity-" class="anchor"></a>comorbidity <img src="reference/figures/hex.png" width="150" align="right">
</h1></div>
<p>README last updated: 2021-10-19</p>
<!-- badges: start -->
<p><a href="https://github.com/ellessenne/comorbidity/actions"><img src="https://github.com/ellessenne/comorbidity/workflows/R-CMD-check/badge.svg" alt="R build status"></a> <a href="https://codecov.io/gh/ellessenne/comorbidity?branch=master"><img src="https://codecov.io/gh/ellessenne/comorbidity/branch/master/graph/badge.svg" alt="Codecov test coverage"></a> <a href="https://cran.r-project.org/package=comorbidity"><img src="http://www.r-pkg.org/badges/version/comorbidity" alt="CRAN_Status_Badge"></a> <a href="https://cran.r-project.org/package=comorbidity"><img src="http://cranlogs.r-pkg.org/badges/comorbidity" alt="CRAN_Logs_Badge"></a> <a href="https://cran.r-project.org/package=comorbidity"><img src="http://cranlogs.r-pkg.org/badges/grand-total/comorbidity" alt="CRAN_Logs_Badge_Total"></a> <a href="https://doi.org/10.21105/joss.00648"><img src="http://joss.theoj.org/papers/10.21105/joss.00648/status.svg" alt="JOSS DOI"></a> <a href="http://makeapullrequest.com/"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" alt="PRs Welcome"></a> <!-- badges: end --></p>
<p><code>comorbidity</code> is an R package for computing comorbidity scores such as the weighted Charlson score and the Elixhauser comorbidity score; both ICD-10 and ICD-9 coding systems are supported.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><code>comorbidity</code> is on CRAN. You can install it as usual with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"comorbidity"</span><span class="op">)</span></code></pre></div>
<p>Alternatively, you can install the development version from GitHub with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"ellessenne/comorbidity"</span><span class="op">)</span></code></pre></div>
</div>
<div id="simulating-icd-10-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#simulating-icd-10-codes" class="anchor"></a>Simulating ICD-10 codes</h2>
<p>The <code>comorbidity</code> packages includes a function named <code><a href="reference/sample_diag.html">sample_diag()</a></code> that allows simulating ICD diagnostic codes in a straightforward way. For instance, we could simulate ICD-10 codes:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load the comorbidity package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ellessenne.github.io/comorbidity/">comorbidity</a></span><span class="op">)</span>
<span class="co">## This is {comorbidity} version 1.0.0.</span>
<span class="co">## A lot has changed since the last release on CRAN, please check-out breaking changes here:</span>
<span class="co">## -&gt; https://ellessenne.github.io/comorbidity/articles/C-changes.html</span>
<span class="co">## Sorry to bother you! This message will disappear in future updates.</span>
<span class="co"># set a seed for reproducibility</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="co"># simulate 50 ICD-10 codes for 5 individuals</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, size <span class="op">=</span> <span class="fl">50</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  code <span class="op">=</span> <span class="fu"><a href="reference/sample_diag.html">sample_diag</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">id</span>, <span class="va">x</span><span class="op">$</span><span class="va">code</span><span class="op">)</span>, <span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">##  id code</span>
<span class="co">##   1  B02</span>
<span class="co">##   1 B582</span>
<span class="co">##   1 I749</span>
<span class="co">##   1 J450</span>
<span class="co">##   1 L893</span>
<span class="co">##   1 Q113</span>
<span class="co">##   1  Q26</span>
<span class="co">##   1 Q978</span>
<span class="co">##   1 T224</span>
<span class="co">##   1 V101</span>
<span class="co">##   1 V244</span>
<span class="co">##   1  V46</span>
<span class="co">##   2 A665</span>
<span class="co">##   2 C843</span>
<span class="co">##   2 D838</span></code></pre></div>
<p>It is also possible to simulate from two different versions of the ICD-10 coding system. The default is to simulate ICD-10 codes from the 2011 version:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, size <span class="op">=</span> <span class="fl">30</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  code <span class="op">=</span> <span class="fu"><a href="reference/sample_diag.html">sample_diag</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, size <span class="op">=</span> <span class="fl">30</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  code <span class="op">=</span> <span class="fu"><a href="reference/sample_diag.html">sample_diag</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, version <span class="op">=</span> <span class="st">"ICD10_2011"</span><span class="op">)</span>
<span class="op">)</span>
<span class="co"># should return TRUE</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span>
<span class="co">## [1] TRUE</span></code></pre></div>
<p>Alternatively, you could use the 2009 version:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, size <span class="op">=</span> <span class="fl">30</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  code <span class="op">=</span> <span class="fu"><a href="reference/sample_diag.html">sample_diag</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, version <span class="op">=</span> <span class="st">"ICD10_2009"</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, size <span class="op">=</span> <span class="fl">30</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  code <span class="op">=</span> <span class="fu"><a href="reference/sample_diag.html">sample_diag</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, version <span class="op">=</span> <span class="st">"ICD10_2011"</span><span class="op">)</span>
<span class="op">)</span>
<span class="co"># should not return TRUE</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span>
<span class="co">## [1] "Component \"code\": 30 string mismatches"</span></code></pre></div>
</div>
<div id="simulating-icd-9-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#simulating-icd-9-codes" class="anchor"></a>Simulating ICD-9 codes</h2>
<p>ICD-9 codes can be easily simulated too:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>
<span class="va">x9</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, size <span class="op">=</span> <span class="fl">30</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  code <span class="op">=</span> <span class="fu"><a href="reference/sample_diag.html">sample_diag</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, version <span class="op">=</span> <span class="st">"ICD9_2015"</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">x9</span> <span class="op">&lt;-</span> <span class="va">x9</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">x9</span><span class="op">$</span><span class="va">id</span>, <span class="va">x9</span><span class="op">$</span><span class="va">code</span><span class="op">)</span>, <span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">x9</span>, n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">##  id  code</span>
<span class="co">##   1 01130</span>
<span class="co">##   1 01780</span>
<span class="co">##   1 30151</span>
<span class="co">##   1  3073</span>
<span class="co">##   1 36907</span>
<span class="co">##   1 37845</span>
<span class="co">##   1 64212</span>
<span class="co">##   1 66704</span>
<span class="co">##   1 72633</span>
<span class="co">##   1  9689</span>
<span class="co">##   1  V289</span>
<span class="co">##   2  0502</span>
<span class="co">##   2 09169</span>
<span class="co">##   2 20046</span>
<span class="co">##   2 25082</span></code></pre></div>
</div>
<div id="computing-comorbidity-scores" class="section level2">
<h2 class="hasAnchor">
<a href="#computing-comorbidity-scores" class="anchor"></a>Computing comorbidity scores</h2>
<p>The main function of the <code>comorbidity</code> package is named <code><a href="reference/comorbidity.html">comorbidity()</a></code>, and it can be used to compute any supported comorbidity score; scores can be specified by setting the <code>score</code> argument, which is required.</p>
<p>Say we have 3 individuals with a total of 30 ICD-10 diagnostic codes:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, size <span class="op">=</span> <span class="fl">30</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  code <span class="op">=</span> <span class="fu"><a href="reference/sample_diag.html">sample_diag</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>We could compute the Charlson comorbidity domains:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">charlson</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/comorbidity.html">comorbidity</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, id <span class="op">=</span> <span class="st">"id"</span>, code <span class="op">=</span> <span class="st">"code"</span>, map <span class="op">=</span> <span class="st">"charlson_icd10_quan"</span>, assign0 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">charlson</span>
<span class="co">##   id ami chf pvd cevd dementia copd rheumd pud mld diab diabwc hp rend canc msld metacanc aids</span>
<span class="co">## 1  1   0   0   0    0        0    0      0   0   0    0      0  0    0    1    0        0    1</span>
<span class="co">## 2  2   0   0   0    0        0    0      0   0   0    0      0  0    0    1    0        0    0</span>
<span class="co">## 3  3   0   0   0    0        0    0      0   0   0    0      0  0    0    0    0        0    0</span></code></pre></div>
<p>We set the <code>assign0</code> argument to <code>FALSE</code> to not apply a hierarchy of comorbidity codes, as described in <code><a href="reference/comorbidity.html">?comorbidity::comorbidity</a></code>.</p>
<p>Alternatively, we could compute the Elixhauser score:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">elixhauser</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/comorbidity.html">comorbidity</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, id <span class="op">=</span> <span class="st">"id"</span>, code <span class="op">=</span> <span class="st">"code"</span>, map <span class="op">=</span> <span class="st">"elixhauser_icd10_quan"</span>, assign0 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">elixhauser</span>
<span class="co">##   id chf carit valv pcd pvd hypunc hypc para ond cpd diabunc diabc hypothy rf ld pud aids lymph</span>
<span class="co">## 1  1   0     0    0   0   0      0    0    0   0   0       0     0       0  0  0   0    1     0</span>
<span class="co">## 2  2   0     0    1   0   0      0    0    0   0   0       0     0       0  0  0   0    0     0</span>
<span class="co">## 3  3   0     0    0   0   0      0    0    0   1   0       0     0       0  0  0   0    0     0</span>
<span class="co">##   metacanc solidtum rheumd coag obes wloss fed blane dane alcohol drug psycho depre</span>
<span class="co">## 1        0        1      0    0    0     0   0     0    0       0    0      0     0</span>
<span class="co">## 2        0        1      0    0    0     0   0     0    0       0    0      0     0</span>
<span class="co">## 3        0        0      0    0    0     0   0     0    0       0    0      0     0</span></code></pre></div>
<p>Weighted an unweighted comorbidity scores can be obtained using the <code><a href="reference/score.html">score()</a></code> function:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">unw_cci</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/score.html">score</a></span><span class="op">(</span><span class="va">charlson</span>, weights <span class="op">=</span> <span class="cn">NULL</span>, assign0 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">quan_cci</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/score.html">score</a></span><span class="op">(</span><span class="va">charlson</span>, weights <span class="op">=</span> <span class="st">"quan"</span>, assign0 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="va">unw_cci</span>, <span class="va">quan_cci</span><span class="op">)</span>
<span class="co">## [1] "Attributes: &lt; Length mismatch: comparison on first 1 components &gt;"</span>
<span class="co">## [2] "Mean relative difference: 1"</span></code></pre></div>
<p>Code for the Elixhauser score is omitted, but works analogously.</p>
<p>Conversely, say we have 5 individuals with a total of 100 ICD-9 diagnostic codes:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, size <span class="op">=</span> <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  code <span class="op">=</span> <span class="fu"><a href="reference/sample_diag.html">sample_diag</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, version <span class="op">=</span> <span class="st">"ICD9_2015"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>The Charlson and Elixhauser comorbidity codes can be easily computed once again:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">charlson9</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/comorbidity.html">comorbidity</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, id <span class="op">=</span> <span class="st">"id"</span>, code <span class="op">=</span> <span class="st">"code"</span>, map <span class="op">=</span> <span class="st">"charlson_icd9_quan"</span>, assign0 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">charlson9</span>
<span class="co">##   id ami chf pvd cevd dementia copd rheumd pud mld diab diabwc hp rend canc msld metacanc aids</span>
<span class="co">## 1  1   0   0   1    0        0    0      0   0   0    0      0  0    0    1    0        0    0</span>
<span class="co">## 2  2   0   0   0    1        0    0      0   0   0    0      0  0    0    0    0        0    0</span>
<span class="co">## 3  3   0   0   0    0        0    0      0   1   0    0      0  0    0    0    0        0    0</span>
<span class="co">## 4  4   0   0   1    1        0    0      0   0   0    0      0  0    0    1    0        0    0</span>
<span class="co">## 5  5   0   0   0    0        0    0      0   0   0    0      0  0    0    1    0        0    0</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">elixhauser9</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/comorbidity.html">comorbidity</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, id <span class="op">=</span> <span class="st">"id"</span>, code <span class="op">=</span> <span class="st">"code"</span>, map <span class="op">=</span> <span class="st">"elixhauser_icd9_quan"</span>, assign0 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">elixhauser9</span>
<span class="co">##   id chf carit valv pcd pvd hypunc hypc para ond cpd diabunc diabc hypothy rf ld pud aids lymph</span>
<span class="co">## 1  1   0     0    0   0   1      0    0    0   0   0       0     0       0  0  0   0    0     0</span>
<span class="co">## 2  2   0     0    0   0   0      0    0    0   1   0       0     0       0  0  0   0    0     0</span>
<span class="co">## 3  3   0     0    0   0   0      0    0    0   0   0       0     0       0  0  0   0    0     0</span>
<span class="co">## 4  4   0     0    0   1   1      0    0    0   0   0       0     0       0  0  0   0    0     0</span>
<span class="co">## 5  5   0     0    0   0   0      0    0    0   0   0       0     0       0  0  0   0    0     0</span>
<span class="co">##   metacanc solidtum rheumd coag obes wloss fed blane dane alcohol drug psycho depre</span>
<span class="co">## 1        0        0      0    0    0     0   0     0    0       0    0      0     0</span>
<span class="co">## 2        0        0      0    0    0     0   0     0    0       0    0      0     0</span>
<span class="co">## 3        0        0      0    0    0     0   0     0    0       0    0      1     0</span>
<span class="co">## 4        0        0      0    0    0     0   0     0    0       0    0      0     0</span>
<span class="co">## 5        0        0      1    0    0     0   0     0    0       0    0      0     0</span></code></pre></div>
<p>Scores:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">unw_eci</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/score.html">score</a></span><span class="op">(</span><span class="va">elixhauser9</span>, weights <span class="op">=</span> <span class="cn">NULL</span>, assign0 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">vw_eci</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/score.html">score</a></span><span class="op">(</span><span class="va">elixhauser9</span>, weights <span class="op">=</span> <span class="st">"vw"</span>, assign0 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="va">unw_eci</span>, <span class="va">vw_eci</span><span class="op">)</span>
<span class="co">## [1] "Attributes: &lt; Length mismatch: comparison on first 1 components &gt;"</span>
<span class="co">## [2] "Mean relative difference: 2"</span></code></pre></div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>If you find <code>comorbidity</code> useful, please cite it in your publications:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span><span class="op">(</span><span class="st">"comorbidity"</span><span class="op">)</span>
<span class="co">## </span>
<span class="co">## To cite the comorbidity package in publications, please use:</span>
<span class="co">## </span>
<span class="co">##   Gasparini, (2018). comorbidity: An R package for computing comorbidity scores. Journal</span>
<span class="co">##   of Open Source Software, 3(23), 648, https://doi.org/10.21105/joss.00648</span>
<span class="co">## </span>
<span class="co">## A BibTeX entry for LaTeX users is</span>
<span class="co">## </span>
<span class="co">##   @Article{,</span>
<span class="co">##     author = {Alessandro Gasparini},</span>
<span class="co">##     title = {comorbidity: An R package for computing comorbidity scores},</span>
<span class="co">##     journal = {Journal of Open Source Software},</span>
<span class="co">##     year = {2018},</span>
<span class="co">##     volume = {3},</span>
<span class="co">##     issue = {23},</span>
<span class="co">##     pages = {648},</span>
<span class="co">##     doi = {10.21105/joss.00648},</span>
<span class="co">##     url = {https://doi.org/10.21105/joss.00648},</span>
<span class="co">##   }</span></code></pre></div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>More details on which comorbidity mapping and scoring algorithm are available within the package can be found in the two accompanying vignettes, which can be accessed on CRAN or directly from your R session:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span><span class="op">(</span><span class="st">"01-introduction"</span>, package <span class="op">=</span> <span class="st">"comorbidity"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span><span class="op">(</span><span class="st">"02-comorbidity-scores"</span>, package <span class="op">=</span> <span class="st">"comorbidity"</span><span class="op">)</span></code></pre></div>
</div>
<div id="copyright" class="section level2">
<h2 class="hasAnchor">
<a href="#copyright" class="anchor"></a>Copyright</h2>
<p>The icon for the hex sticker was made by <a href="https://www.flaticon.com/authors/monkik">monkik</a> from <a href="https://www.flaticon.com">www.flaticon.com</a>, and is licensed by <a href="https://creativecommons.org/licenses/by/3.0">Creative Commons BY 3.0</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=comorbidity">https://​cloud.r-project.org/​package=comorbidity</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ellessenne/comorbidity/">https://​github.com/​ellessenne/​comorbidity/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ellessenne/comorbidity/issues">https://​github.com/​ellessenne/​comorbidity/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing comorbidity</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Alessandro Gasparini <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8319-7624" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Alessandro Gasparini.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
